<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="2333333333">
    <meta name="keyword" content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        my - JiZiTi | 学习管理
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <link href="//at.alicdn.com/t/font_1165120_w77ne6oe34j.css" rel="stylesheet" type="text/css">
    <!-- https://www.bootcdn.cn/mathjax/ -->
    
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>

<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> to be better </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg">
        </div>
        <div class="name">
            <i>JiZiTi</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#从两个不同领域的主流媒体获取“华为”相关文章"><span class="toc-text">从两个不同领域的主流媒体获取“华为”相关文章</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取每条链接中的主内容"><span class="toc-text">获取每条链接中的主内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文本处理"><span class="toc-text">文本处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#结果"><span class="toc-text">结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> to be better </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        my
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-06-18 09:06:35</span></span>
        
        
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content no-indent">
        <p>。</p>
<p>。</p>
<p>。</p>
<h3 id="从两个不同领域的主流媒体获取“华为”相关文章"><a href="#从两个不同领域的主流媒体获取“华为”相关文章" class="headerlink" title="从两个不同领域的主流媒体获取“华为”相关文章"></a>从两个不同领域的主流媒体获取“华为”相关文章</h3><p><a href="https://juejin.im/search?query=%E5%8D%8E%E4%B8%BA&amp;type=article" target="_blank" rel="noopener">掘金搜索：华为</a></p>
<p><a href="https://s.weibo.com/article?q=%E5%8D%8E%E4%B8%BA&amp;Refer=SListRelpage_box" target="_blank" rel="noopener">微博搜索：华为</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTML</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        kv = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0'</span>,</span><br><span class="line">              <span class="string">'query'</span>: <span class="string">'华为'</span>, <span class="string">'type'</span>: <span class="string">'article'</span>&#125;</span><br><span class="line">        r = requests.get(url, params=kv)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"爬取失败"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHref</span><span class="params">(r)</span>:</span></span><br><span class="line">    demo = r.text</span><br><span class="line">    soup = BeautifulSoup(demo, <span class="string">'html.parser'</span>)</span><br><span class="line">    contain = set()</span><br><span class="line">    <span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">'a'</span>):</span><br><span class="line">        string = link.get(<span class="string">'href'</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> string:</span><br><span class="line">            string = <span class="string">'nothing'</span></span><br><span class="line">        rex = re.compile(<span class="string">'^/(post|entry)/([0-9a-z]+)#?'</span>)</span><br><span class="line">        rst = rex.search(string)</span><br><span class="line">        <span class="keyword">if</span> rst <span class="keyword">and</span> rst.group(<span class="number">0</span>) <span class="keyword">not</span> <span class="keyword">in</span> contain:</span><br><span class="line">            contain.add(rst.group(<span class="number">0</span>))</span><br><span class="line">            txtFile=open(<span class="string">'re1.txt'</span>,<span class="string">'a'</span>)</span><br><span class="line">            txtFile.writelines(<span class="string">'https://juejin.im/'</span>+rst.group(<span class="number">1</span>)+<span class="string">'/'</span>+rst.group(<span class="number">2</span>)+<span class="string">'\r\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    url = <span class="string">"https://juejin.im/search"</span></span><br><span class="line">    r = getHTML(url)</span><br><span class="line">    getHref(r)</span><br></pre></td></tr></table></figure>
<p>获取链接列表保存至re1.txt</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHTML</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        kv = &#123;<span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0'</span>,</span><br><span class="line">              <span class="string">'q'</span>: <span class="string">'华为'</span>,</span><br><span class="line">              <span class="string">'Refer'</span>: <span class="string">'SListRelpage_box'</span>&#125;</span><br><span class="line">        r = requests.get(url, params=kv)</span><br><span class="line">        r.raise_for_status()</span><br><span class="line">        r.encoding = r.apparent_encoding</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"爬取失败"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHref</span><span class="params">(r)</span>:</span></span><br><span class="line">    demo = r.text</span><br><span class="line">    soup = BeautifulSoup(demo, <span class="string">'html.parser'</span>)</span><br><span class="line">    <span class="keyword">for</span> link <span class="keyword">in</span> soup.find_all(<span class="string">'h3'</span>):</span><br><span class="line">        string = link.a.get(<span class="string">'href'</span>)</span><br><span class="line">        <span class="keyword">if</span> string:</span><br><span class="line">            txtFile=open(<span class="string">'re2.txt'</span>,<span class="string">'a'</span>)</span><br><span class="line">            txtFile.writelines(string+<span class="string">'\r\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    url = <span class="string">"https://s.weibo.com/article"</span></span><br><span class="line">    r = getHTML(url)</span><br><span class="line">    getHref(r)</span><br></pre></td></tr></table></figure>
<p>获取链接列表保存至re2.txt</p>
<h3 id="获取每条链接中的主内容"><a href="#获取每条链接中的主内容" class="headerlink" title="获取每条链接中的主内容"></a>获取每条链接中的主内容</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> String filename = <span class="string">"d:/re.htm"</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(String url)</span></span>&#123;</span><br><span class="line">		String html;		</span><br><span class="line">		PrintWriter pw;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Document doc = Jsoup.connect(url).get();</span><br><span class="line">			pw = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> File(filename));</span><br><span class="line">			html = doc.html();</span><br><span class="line">			pw.print(html);</span><br><span class="line">			pw.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			System.out.println(<span class="string">"Download "</span>+url+<span class="string">" fail"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//获取主内容</span></span><br><span class="line">		File f1 = <span class="keyword">new</span> File(<span class="string">"d:/re1.txt"</span>);</span><br><span class="line">        BufferedReader br1 = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(f1));</span><br><span class="line">        BufferedWriter out1 = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"d:/juejin.txt"</span>, <span class="keyword">true</span>)));</span><br><span class="line">        String line = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">while</span> ((line = br1.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        	<span class="keyword">if</span>(line.equals(<span class="string">""</span>))</span><br><span class="line">        		<span class="keyword">continue</span>;</span><br><span class="line">            get(line);</span><br><span class="line">            String  content = parser.Main.getChinese(filename);</span><br><span class="line">            out1.write(content);</span><br><span class="line">        &#125;</span><br><span class="line">        br1.close();</span><br><span class="line">        out1.close();</span><br><span class="line">        </span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"d:/re2.txt"</span>);</span><br><span class="line">        BufferedReader br2 = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(f2));</span><br><span class="line">        BufferedWriter out2 = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"d:/weibo.txt"</span>, <span class="keyword">true</span>)));</span><br><span class="line">        <span class="keyword">while</span> ((line = br2.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        	<span class="keyword">if</span>(line.equals(<span class="string">""</span>))</span><br><span class="line">        		<span class="keyword">continue</span>;</span><br><span class="line">            get(line);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            	String  content = parser.Main.getChinese(filename);</span><br><span class="line">            	out2.write(content);</span><br><span class="line">            	</span><br><span class="line">            &#125;<span class="keyword">catch</span>(ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">            	System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        br2.close();</span><br><span class="line">        out2.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h3><p>对爬虫结果进行如下处理：</p>
<ol>
<li>分词处理：使用stanford NLP工具箱中的分词工具，得到分词结果，将结果放入集合中；</li>
<li>删除停用词：使用停词表对分词结果进行清洗；</li>
<li>词频统计和排序：使用Hashmap类（散列表，存储的内容是键值对映射）对上一步骤的结果进行统计，利用比较器进行排序；</li>
<li>输出排序后的前15个词语，得到结果。</li>
<li>使用Python画出词云。</li>
</ol>
<p>词频统计代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Count</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">		  String basedir = System.getProperty(<span class="string">"SegDemo"</span>, <span class="string">"data"</span>); </span><br><span class="line">		  Properties props = <span class="keyword">new</span> Properties();  </span><br><span class="line">		  props.setProperty(<span class="string">"sighanCorporaDict"</span>, basedir); </span><br><span class="line">		  props.setProperty(<span class="string">"NormalizationTable"</span>, <span class="string">"data/norm.simp.utf8"</span>); </span><br><span class="line">		  props.setProperty(<span class="string">"normTableEncoding"</span>, <span class="string">"UTF-8"</span>); </span><br><span class="line">		  props.setProperty(<span class="string">"serDictionary"</span>, basedir + <span class="string">"/dict-chris6.ser.gz"</span>); </span><br><span class="line">		  props.setProperty(<span class="string">"inputEncoding"</span>, <span class="string">"UTF-8"</span>); </span><br><span class="line">		  props.setProperty(<span class="string">"sighanPostProcessing"</span>, <span class="string">"true"</span>);    </span><br><span class="line">		  CRFClassifier&lt;CoreLabel&gt; segmenter = <span class="keyword">new</span> CRFClassifier&lt;&gt;(props); </span><br><span class="line">		  segmenter.loadClassifierNoExceptions(basedir + <span class="string">"/ctb.gz"</span>, props);   </span><br><span class="line">		  <span class="comment">//读入文本组成的字符串</span></span><br><span class="line">		  List&lt;String&gt; segmented = segmenter.segmentString(txt);  </span><br><span class="line">		  List&lt;String&gt; arrList = <span class="keyword">new</span> ArrayList&lt;String&gt;(segmented);</span><br><span class="line">		  <span class="comment">//读入停用词文本，去除停用词</span></span><br><span class="line">		  ArrayList&lt;String&gt; stopword = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		  File file1 = <span class="keyword">new</span> File(<span class="string">"stopword.txt"</span>);</span><br><span class="line">		  BufferedReader br1 = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(file1));</span><br><span class="line">		  String string1 = <span class="keyword">null</span>;</span><br><span class="line">		  <span class="keyword">while</span> ((string1 = br1.readLine()) != <span class="keyword">null</span>) </span><br><span class="line">	            stopword.add(string1);</span><br><span class="line">	      br1.close();</span><br><span class="line">	      stopword.add(<span class="string">""</span>);   </span><br><span class="line">	      arrList.removeAll(stopword);</span><br><span class="line">	      <span class="comment">//统计词频</span></span><br><span class="line">		  Map&lt;String,Integer&gt; amountWord=<span class="keyword">new</span> HashMap&lt;String,Integer&gt;();</span><br><span class="line">	        <span class="keyword">for</span> (String string : arrList) &#123;</span><br><span class="line">	            <span class="keyword">if</span>(!amountWord.containsKey(string))&#123;</span><br><span class="line">	                amountWord.put(string,<span class="number">1</span>);</span><br><span class="line">	            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	                amountWord.put(string, amountWord.get(string).intValue()+<span class="number">1</span>);</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;</span><br><span class="line">	        SortMap(amountWord);  <span class="comment">//排序后输出</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>绘制图云（Python）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba <span class="comment">#分词器</span></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, STOPWORDS, ImageColorGenerator</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">wc = WordCloud(background_color=<span class="string">'white'</span>,  <span class="comment"># 背景颜色</span></span><br><span class="line">               font_path=<span class="string">"C:/Windows/Fonts/STFANGSO.ttf"</span>,  </span><br><span class="line">               random_state=<span class="number">42</span>,  <span class="comment"># 为每个词返回一个PIL颜色</span></span><br><span class="line">               width=<span class="number">1000</span>,  <span class="comment"># 图片的宽</span></span><br><span class="line">               height=<span class="number">860</span>  <span class="comment">#图片的长</span></span><br><span class="line">               )</span><br><span class="line"></span><br><span class="line">text = open(<span class="string">"weibo.txt"</span>, encoding=<span class="string">'UTF-8'</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stop_words</span><span class="params">(texts)</span>:</span></span><br><span class="line">    words_list = []</span><br><span class="line">    word_generator = jieba.cut(texts, cut_all=<span class="keyword">False</span>)  <span class="comment"># 返回的是一个迭代器</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'stop.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        str_text = f.read()</span><br><span class="line">        unicode_text=str_text.split(<span class="string">"\n"</span>)</span><br><span class="line">        f.close()  <span class="comment"># stopwords文本中词的格式是'一词一行'</span></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> word_generator:</span><br><span class="line">        <span class="keyword">if</span> word.strip() <span class="keyword">not</span> <span class="keyword">in</span> unicode_text:</span><br><span class="line">            words_list.append(word)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">' '</span>.join(words_list) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">text = stop_words(text)</span><br><span class="line">wc.generate(text)</span><br><span class="line"></span><br><span class="line">plt.imshow(wc)    <span class="comment"># 显示图片</span></span><br><span class="line">plt.axis(<span class="string">'off'</span>)   <span class="comment"># 关闭坐标轴</span></span><br><span class="line">plt.figure()      <span class="comment"># 绘制词云</span></span><br><span class="line">wc.to_file(<span class="string">'weibo.png'</span>)     <span class="comment"># 保存图片</span></span><br></pre></td></tr></table></figure>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p> 在微博上爬取“华为”关键字的结果：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>华为: 184</th>
<th>系统: 69</th>
<th>手机: 51</th>
<th>pro:43</th>
<th>年: 43</th>
</tr>
</thead>
<tbody>
<tr>
<td>操作: 37</td>
<td>美国: 36</td>
<td>iso:27</td>
<td>网络: 27</td>
<td>安卓: 25</td>
</tr>
<tr>
<td>三星: 24</td>
<td>5g:23</td>
<td>中: 23</td>
<td>公司: 22</td>
<td>mate:22</td>
</tr>
</tbody>
</table>
</div>
<p><img src="../img/loading.gif" data-original="D:\数据挖掘\小组展示爬虫\1.jpg" alt="img"></p>
<p>在掘金上爬取“华为”关键字的结果：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>服务: 199</th>
<th>华为: 182</th>
<th>中: 161</th>
<th>适配: 128</th>
<th>状态: 103</th>
</tr>
</thead>
<tbody>
<tr>
<td>显示: 91</td>
<td>栏: 85</td>
<td>面试: 84</td>
<td>开源: 83</td>
<td>软件: 81</td>
</tr>
<tr>
<td>做: 81</td>
<td>协议: 80</td>
<td>用户: 78</td>
<td>技术: 78</td>
<td>开发: 76</td>
</tr>
</tbody>
</table>
</div>
<p><img src="../img/loading.gif" data-original="D:\数据挖掘\小组展示爬虫\2.jpg" alt="img"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3>
        <a id="gotop" href="#"><i class="iconfont icon-up-circle"></i></a>
        
        <br>
        <div id="gitalk-container">
        </div>
    </div>
</div>
    </div>
</div>

<footer class="footer">
    <ul class="list-inline text-center">
        <li>
            <a target="_blank" href="https://xn--i0v668g.com/">
                            <span>
                                <i class="iconfont icon-yang"></i>
                            </span>
            </a>
        </li>
        

        

        

        

        

    </ul>
    
    <p>
	to work harder
        <!-- 
	<span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span> 
----------------------------����if you are looking for my theme����---------------------------
	<a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a>
----------------------------------------------------------------------------------------------
	-->
        <a href="https://hexo.io/">Hexo</a></p>
</footer><!-- hexo-inject:begin --><!-- hexo-inject:end -->




<script>!function(e){var r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function t(){for(var c=0;c<r.length;c++)t=r[c],void 0,0<=(n=t.getBoundingClientRect()).top&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=r[c];t=o,n=function(){r=r.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}t(),e.addEventListener("scroll",function(){!function(t,n){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)}(t,e)})}(this);</script></body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/gitment.js"></script>


</html>
